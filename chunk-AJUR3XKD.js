import{b as F,c as g,d as L,e as P,g as k,i as M,j as T,p as N,r as A}from"./chunk-UDLBRQ3V.js";import{$ as o,Da as x,E as r,Fa as y,Ga as S,Ia as E,J as m,L as p,O as s,S as i,T as n,U as u,W as c,X as f,ba as v,ha as h,ja as _,u as d,v as C,va as w}from"./chunk-NIPSTPOT.js";var B=e=>({"is-invalid":e});function q(e,l){if(e&1&&(i(0,"div",8),o(1),n()),e&2){let a=f();r(),v(" ",a.errorMessage," ")}}function D(e,l){e&1&&o(0," Email is required ")}function V(e,l){e&1&&o(0," Please enter a valid email address ")}function G(e,l){if(e&1&&(i(0,"div",16),m(1,D,1,0)(2,V,1,0),n()),e&2){let a=f();r(),s(a.f.email.errors.required?1:-1),r(),s(a.f.email.errors.email?2:-1)}}function I(e,l){e&1&&o(0," Password is required ")}function O(e,l){if(e&1&&(i(0,"div",16),m(1,I,1,0),n()),e&2){let a=f();r(),s(a.f.password.errors.required?1:-1)}}function R(e,l){e&1&&(u(0,"span",33),o(1," Signing in... "))}function j(e,l){e&1&&o(0," Sign In ")}var U=class e{fb=d(N);authService=d(E);router=d(y);route=d(x);loginForm;loading=!1;submitted=!1;errorMessage="";showPassword=!1;constructor(){this.loginForm=this.fb.group({email:["",[g.required,g.email]],password:["",g.required]})}get f(){return this.loginForm.controls}onSubmit(){if(this.submitted=!0,this.errorMessage="",this.loginForm.invalid)return;this.loading=!0;let{email:l,password:a}=this.loginForm.value;this.authService.login(l,a).subscribe({next:()=>{let t=this.route.snapshot.queryParams.returnUrl||"/";this.router.navigateByUrl(t)},error:t=>{this.errorMessage=t.message||"Invalid email or password",this.loading=!1}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}fillAdminCredentials(){this.loginForm.patchValue({email:"admin@beneficiary.com",password:"password"})}fillBeneficiaryCredentials(){this.loginForm.patchValue({email:"user@beneficiary.com",password:"password"})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=C({type:e,selectors:[["app-login"]],standalone:!0,features:[h],decls:59,vars:14,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"fw-bold","mb-0"],[1,"text-muted"],["role","alert",1,"alert","alert-danger"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","email",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"material-icons"],["type","email","id","email","formControlName","email","placeholder","Enter your email","autocomplete","email",1,"form-control",3,"ngClass"],[1,"invalid-feedback","d-block"],[1,"mb-4"],["for","password",1,"form-label"],["id","password","formControlName","password","placeholder","Enter your password","autocomplete","current-password",1,"form-control",3,"type","ngClass"],["type","button",1,"input-group-text","bg-transparent",3,"click"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","/auth/register",1,"text-primary","fw-bold"],[1,"card","mt-4","shadow"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"list-group","list-group-flush"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(a,t){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),o(7,"Welcome Back"),n(),i(8,"p",7),o(9,"Sign in to continue to Beneficiary"),n()(),m(10,q,2,1,"div",8),i(11,"form",9),c("ngSubmit",function(){return t.onSubmit()}),i(12,"div",10)(13,"label",11),o(14,"Email"),n(),i(15,"div",12)(16,"span",13)(17,"span",14),o(18,"email"),n()(),u(19,"input",15),n(),m(20,G,3,2,"div",16),n(),i(21,"div",17)(22,"label",18),o(23,"Password"),n(),i(24,"div",12)(25,"span",13)(26,"span",14),o(27,"lock"),n()(),u(28,"input",19),i(29,"button",20),c("click",function(){return t.togglePasswordVisibility()}),i(30,"span",14),o(31),n()()(),m(32,O,2,1,"div",16),n(),i(33,"div",21)(34,"button",22),m(35,R,2,0)(36,j,1,0),n()(),i(37,"div",23)(38,"p",24),o(39," Don't have an account? "),i(40,"a",25),o(41,"Register"),n()()()()()(),i(42,"div",26)(43,"div",27)(44,"h5",28),o(45,"Demo Accounts"),n(),i(46,"p",29),o(47,"Use these credentials for testing:"),n(),i(48,"ul",30)(49,"li",31)(50,"span"),o(51,"Admin User"),n(),i(52,"button",32),c("click",function(){return t.fillAdminCredentials()}),o(53," Use Admin "),n()(),i(54,"li",31)(55,"span"),o(56,"Beneficiary User"),n(),i(57,"button",32),c("click",function(){return t.fillBeneficiaryCredentials()}),o(58," Use Beneficiary "),n()()()()()()()()),a&2&&(r(10),s(t.errorMessage?10:-1),r(),p("formGroup",t.loginForm),r(8),p("ngClass",_(10,B,t.submitted&&t.f.email.errors)),r(),s(t.submitted&&t.f.email.errors?20:-1),r(8),p("type",t.showPassword?"text":"password")("ngClass",_(12,B,t.submitted&&t.f.password.errors)),r(3),v(" ",t.showPassword?"visibility_off":"visibility"," "),r(),s(t.submitted&&t.f.password.errors?32:-1),r(2),p("disabled",t.loading),r(),s(t.loading?35:36))},dependencies:[A,k,F,L,P,M,T,w,S],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:10px}.form-control[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1rem}"]})};export{U as LoginComponent};
