import{b as j}from"./chunk-SN6GRNMG.js";import{$ as n,Aa as N,E as r,Ga as U,Ia as O,J as m,L as f,O as d,P as B,Q as C,R as g,S as i,T as e,W as I,X as c,aa as s,ba as p,e as E,g as P,ha as k,i as w,ia as A,ja as F,ka as $,la as _,ma as b,na as v,u as x,v as T,va as D,ya as L,za as M}from"./chunk-NIPSTPOT.js";var z=(t,o)=>o.id,Y=t=>["/beneficiaries",t],V=()=>[1,2,3,4,5],q=(t,o)=>({"text-warning":t,"text-muted":o});function G(t,o){t&1&&(i(0,"div",21)(1,"div",13)(2,"h4",14),n(3,"Admin Dashboard"),e(),i(4,"p",22),n(5,"As an admin, you have access to manage all beneficiaries."),e(),i(6,"div",23)(7,"a",24)(8,"span",11),n(9,"people"),e(),n(10," Manage Beneficiaries "),e(),i(11,"a",25)(12,"span",11),n(13,"person_add"),e(),n(14," Add New Beneficiary "),e()()()())}function H(t,o){t&1&&(i(0,"div",28)(1,"span",31),n(2,"Loading..."),e()())}function J(t,o){if(t&1&&(i(0,"div",29),n(1),i(2,"p",32)(3,"a",33),n(4,"Browse all beneficiaries"),e()()()),t&2){let a=c(2);r(),p(" ",a.error," ")}}function K(t,o){if(t&1&&(i(0,"span",44),n(1,"star"),e(),n(2),_(3,"number"),i(4,"span",45),n(5),e()),t&2){let a=c();r(2),p(" ",v(3,2,a.averageRating,"1.1-1")," "),r(3),p("(",a.ratings.length,")")}}function Q(t,o){t&1&&(i(0,"span",22),n(1,"Not rated yet"),e())}function W(t,o){if(t&1&&(i(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"h6",38),n(5,"Budget"),e(),i(6,"h4",39),n(7),_(8,"number"),e()()()(),i(9,"div",35)(10,"div",36)(11,"div",37)(12,"h6",38),n(13,"Power"),e(),i(14,"h4",39),n(15),e()()()(),i(16,"div",35)(17,"div",36)(18,"div",37)(19,"h6",38),n(20,"Status"),e(),i(21,"h4",39)(22,"span",40),n(23),e()()()()(),i(24,"div",35)(25,"div",36)(26,"div",37)(27,"h6",38),n(28,"Average Rating"),e(),i(29,"h4",41),m(30,K,6,5)(31,Q,2,0,"span",22),e()()()(),i(32,"div",42)(33,"a",43)(34,"span",11),n(35,"visibility"),e(),n(36," View Public Profile "),e()()()),t&2){let a=o;r(7),p("$",v(8,6,a.budget,"1.0-0"),""),r(8),p("",a.power,"%"),r(7),f("ngClass",a.isApproved?"bg-success":"bg-warning"),r(),p(" ",a.isApproved?"Approved":"Pending Approval"," "),r(7),d(a.averageRating>0?30:31),r(3),f("routerLink",F(9,Y,a.id))}}function X(t,o){if(t&1&&(m(0,W,37,11,"div",34),_(1,"async")),t&2){let a,l=c(2);d((a=b(1,1,l.beneficiaryProfile$))?0:-1,a)}}function Z(t,o){t&1&&(i(0,"div",30)(1,"div",46)(2,"span",31),n(3,"Loading..."),e()()())}function ee(t,o){t&1&&(i(0,"div",47)(1,"span",49),n(2,"star_border"),e(),i(3,"h5"),n(4,"No ratings yet"),e(),i(5,"p",22),n(6,"Your profile hasn't received any ratings"),e()())}function te(t,o){if(t&1&&(i(0,"span",54),n(1," star "),e()),t&2){let a=o.$implicit,l=c().$implicit;f("ngClass",$(1,q,a<=l.value,a>l.value))}}function ie(t,o){if(t&1&&(i(0,"p",55),n(1),e()),t&2){let a=c().$implicit;r(),s(a.comment)}}function ne(t,o){if(t&1&&(i(0,"div",50)(1,"div",51)(2,"div")(3,"h6",52),n(4),e(),i(5,"small",22),n(6),_(7,"date"),e()(),i(8,"div",53),C(9,te,2,4,"span",54,B),e()(),m(11,ie,2,1,"p",55),e()),t&2){let a=o.$implicit;r(4),s(a.raterName),r(2),s(v(7,3,a.createdAt,"mediumDate")),r(3),g(A(6,V)),r(2),d(a.comment?11:-1)}}function ae(t,o){if(t&1&&(i(0,"div",48),C(1,ne,12,7,"div",50,z),e()),t&2){let a=c();r(),g(a.ratings)}}function oe(t,o){t&1&&m(0,ee,7,0,"div",47)(1,ae,3,0,"div",48),t&2&&d(o.ratings.length===0?0:1)}function re(t,o){if(t&1&&(m(0,oe,2,1),_(1,"async")),t&2){let a,l=c(2);d((a=b(1,1,l.beneficiaryProfile$))?0:-1,a)}}function le(t,o){if(t&1&&(i(0,"div",21)(1,"div",13)(2,"div",26)(3,"h4",27),n(4,"My Beneficiary Profile"),e(),m(5,H,3,0,"div",28),e(),m(6,J,5,1,"div",29)(7,X,2,3),e()(),i(8,"div",3)(9,"div",13)(10,"h4",14),n(11,"My Ratings"),e(),m(12,Z,4,0,"div",30)(13,re,2,3),e()()),t&2){let a=c();r(5),d(a.loading?5:-1),r(),d(a.error?6:7),r(6),d(a.loading?12:13)}}var R=class t{authService=x(O);beneficiaryService=x(j);beneficiaryProfile$=null;loading=!1;error="";constructor(){this.authService.isBeneficiary()&&this.loadBeneficiaryProfile()}loadBeneficiaryProfile(){this.loading=!0,this.error="";let o=this.authService.currentUser();if(!o){this.error="User not found",this.loading=!1;return}this.beneficiaryProfile$=this.beneficiaryService.getBeneficiaryById(o.id).pipe(w(a=>(this.error="Could not load your beneficiary profile. You may need to create one first.",this.loading=!1,E())),P(a=>(this.loading=!1,a)))}logout(){this.authService.logout()}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=T({type:t,selectors:[["app-profile"]],standalone:!0,features:[k],decls:41,vars:6,consts:[[1,"container","py-5"],[1,"row"],[1,"col-lg-4","mb-4","mb-lg-0"],[1,"card","shadow-sm"],[1,"card-body","text-center","p-4"],[1,"avatar-placeholder","mb-3"],[1,"material-icons",2,"font-size","4rem"],[1,"fw-bold","mb-1"],[1,"text-muted","mb-3"],[1,"d-grid","gap-2","mt-4"],[1,"btn","btn-outline-danger",3,"click"],[1,"material-icons","me-2"],[1,"card","shadow-sm","mt-4"],[1,"card-body","p-4"],[1,"fw-bold","mb-3"],[1,"mb-3"],[1,"d-flex","align-items-center","mb-2"],[1,"material-icons","me-2","text-primary"],[1,"text-muted","small"],[1,"d-flex","align-items-center"],[1,"col-lg-8"],[1,"card","shadow-sm","mb-4"],[1,"text-muted"],[1,"d-grid","gap-2","d-md-flex"],["routerLink","/admin/beneficiaries",1,"btn","btn-primary"],["routerLink","/admin/beneficiaries/add",1,"btn","btn-outline-primary"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fw-bold","mb-0"],["role","status",1,"spinner-border","spinner-border-sm","text-primary"],["role","alert",1,"alert","alert-warning"],[1,"d-flex","justify-content-center","my-4"],[1,"visually-hidden"],[1,"mb-0","mt-2"],["routerLink","/beneficiaries",1,"alert-link"],[1,"row","g-3"],[1,"col-md-6"],[1,"card","bg-light"],[1,"card-body"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-title","mb-0"],[1,"badge",3,"ngClass"],[1,"card-title","mb-0","d-flex","align-items-center"],[1,"col-12","mt-3"],[1,"btn","btn-primary",3,"routerLink"],[1,"material-icons","text-warning","me-1"],[1,"text-muted","ms-1","small"],["role","status",1,"spinner-border","text-primary"],[1,"text-center","py-4"],[1,"list-group"],[1,"material-icons","d-block","mb-3","text-muted",2,"font-size","3rem"],[1,"list-group-item"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"d-flex"],[1,"material-icons",2,"font-size","1rem",3,"ngClass"],[1,"mt-2","mb-0"]],template:function(a,l){if(a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),n(7,"account_circle"),e()(),i(8,"h3",7),n(9),e(),i(10,"p",8),n(11),e(),i(12,"div",9)(13,"button",10),I("click",function(){return l.logout()}),i(14,"span",11),n(15,"logout"),e(),n(16," Sign Out "),e()()()(),i(17,"div",12)(18,"div",13)(19,"h5",14),n(20,"Account Information"),e(),i(21,"div",15)(22,"div",16)(23,"span",17),n(24,"email"),e(),i(25,"div")(26,"div",18),n(27,"Email"),e(),i(28,"div"),n(29),e()()(),i(30,"div",19)(31,"span",17),n(32,"badge"),e(),i(33,"div")(34,"div",18),n(35,"User ID"),e(),i(36,"div"),n(37),e()()()()()()(),i(38,"div",20),m(39,G,15,0,"div",21)(40,le,14,3),e()()()),a&2){let u,S,y,h;r(9),s((u=l.authService.currentUser())==null?null:u.name),r(2),p(" ",(S=l.authService.currentUser())==null?null:S.role," "),r(18),s((y=l.authService.currentUser())==null?null:y.email),r(8),s((h=l.authService.currentUser())==null?null:h.id),r(2),d(l.authService.isAdmin()?39:-1),r(),d(l.authService.isBeneficiary()?40:-1)}},dependencies:[D,U,L,M,N],styles:[".avatar-placeholder[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background-color:#e9ecef;display:flex;align-items:center;justify-content:center;margin:0 auto;color:#6c757d}.badge[_ngcontent-%COMP%]{font-weight:500;padding:.5em .8em}.card[_ngcontent-%COMP%]{border:none;border-radius:10px}"]})};export{R as ProfileComponent};
