import{b as E,c as p,d as R,e as F,g as T,i as M,j as N,p as q,r as k}from"./chunk-UDLBRQ3V.js";import{$ as n,E as o,Fa as y,Ga as S,Ia as P,J as d,L as m,O as l,S as r,T as i,U as c,W as v,X as u,ba as b,ha as x,ja as f,u as g,v as w,va as h}from"./chunk-NIPSTPOT.js";var _=e=>({"is-invalid":e});function A(e,a){if(e&1&&(r(0,"div",8),n(1),i()),e&2){let s=u();o(),b(" ",s.errorMessage," ")}}function D(e,a){e&1&&n(0," Full name is required ")}function G(e,a){if(e&1&&(r(0,"div",16),d(1,D,1,0),i()),e&2){let s=u();o(),l(s.f.name.errors.required?1:-1)}}function O(e,a){e&1&&n(0," Email is required ")}function I(e,a){e&1&&n(0," Please enter a valid email address ")}function L(e,a){if(e&1&&(r(0,"div",16),d(1,O,1,0)(2,I,1,0),i()),e&2){let s=u();o(),l(s.f.email.errors.required?1:-1),o(),l(s.f.email.errors.email?2:-1)}}function j(e,a){e&1&&n(0," Password is required ")}function B(e,a){e&1&&n(0," Password must be at least 6 characters ")}function z(e,a){if(e&1&&(r(0,"div",16),d(1,j,1,0)(2,B,1,0),i()),e&2){let s=u();o(),l(s.f.password.errors.required?1:-1),o(),l(s.f.password.errors.minlength?2:-1)}}function H(e,a){e&1&&n(0," Please confirm your password ")}function J(e,a){e&1&&n(0," Passwords do not match ")}function K(e,a){if(e&1&&(r(0,"div",16),d(1,H,1,0)(2,J,1,0),i()),e&2){let s=u();o(),l(s.f.confirmPassword.errors.required?1:-1),o(),l(s.f.confirmPassword.errors.matching?2:-1)}}function Q(e,a){e&1&&(c(0,"span",30),n(1," Creating account... "))}function U(e,a){e&1&&n(0," Create Account ")}var V=class e{fb=g(q);authService=g(P);router=g(y);registerForm;loading=!1;submitted=!1;errorMessage="";showPassword=!1;constructor(){this.registerForm=this.fb.group({name:["",p.required],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],confirmPassword:["",p.required]},{validators:this.passwordMatchValidator})}get f(){return this.registerForm.controls}passwordMatchValidator(a){let s=a.get("password")?.value,t=a.get("confirmPassword")?.value;return s!==t&&a.get("confirmPassword")?.setErrors({matching:!0}),null}onSubmit(){if(this.submitted=!0,this.errorMessage="",this.registerForm.invalid)return;this.loading=!0;let{name:a,email:s,password:t}=this.registerForm.value;this.authService.register(s,a,t).subscribe({next:()=>{this.router.navigate(["/"])},error:C=>{this.errorMessage=C.message||"Registration failed",this.loading=!1}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}static \u0275fac=function(s){return new(s||e)};static \u0275cmp=w({type:e,selectors:[["app-register"]],standalone:!0,features:[x],decls:60,vars:23,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow"],[1,"card-body","p-5"],[1,"text-center","mb-4"],[1,"fw-bold","mb-0"],[1,"text-muted"],["role","alert",1,"alert","alert-danger"],["novalidate","",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","name",1,"form-label"],[1,"input-group"],[1,"input-group-text"],[1,"material-icons"],["type","text","id","name","formControlName","name","placeholder","Enter your full name","autocomplete","name",1,"form-control",3,"ngClass"],[1,"invalid-feedback","d-block"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email","placeholder","Enter your email","autocomplete","email",1,"form-control",3,"ngClass"],["for","password",1,"form-label"],["id","password","formControlName","password","placeholder","Create a password","autocomplete","new-password",1,"form-control",3,"type","ngClass"],["type","button",1,"input-group-text","bg-transparent",3,"click"],[1,"mb-4"],["for","confirmPassword",1,"form-label"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password","autocomplete","new-password",1,"form-control",3,"type","ngClass"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],[1,"text-center","mt-4"],[1,"mb-0"],["routerLink","/auth/login",1,"text-primary","fw-bold"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,t){s&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),n(7,"Create Account"),i(),r(8,"p",7),n(9,"Register as a Beneficiary"),i()(),d(10,A,2,1,"div",8),r(11,"form",9),v("ngSubmit",function(){return t.onSubmit()}),r(12,"div",10)(13,"label",11),n(14,"Full Name"),i(),r(15,"div",12)(16,"span",13)(17,"span",14),n(18,"person"),i()(),c(19,"input",15),i(),d(20,G,2,1,"div",16),i(),r(21,"div",10)(22,"label",17),n(23,"Email"),i(),r(24,"div",12)(25,"span",13)(26,"span",14),n(27,"email"),i()(),c(28,"input",18),i(),d(29,L,3,2,"div",16),i(),r(30,"div",10)(31,"label",19),n(32,"Password"),i(),r(33,"div",12)(34,"span",13)(35,"span",14),n(36,"lock"),i()(),c(37,"input",20),r(38,"button",21),v("click",function(){return t.togglePasswordVisibility()}),r(39,"span",14),n(40),i()()(),d(41,z,3,2,"div",16),i(),r(42,"div",22)(43,"label",23),n(44,"Confirm Password"),i(),r(45,"div",12)(46,"span",13)(47,"span",14),n(48,"lock"),i()(),c(49,"input",24),i(),d(50,K,3,2,"div",16),i(),r(51,"div",25)(52,"button",26),d(53,Q,2,0)(54,U,1,0),i()(),r(55,"div",27)(56,"p",28),n(57," Already have an account? "),r(58,"a",29),n(59,"Sign In"),i()()()()()()()()()),s&2&&(o(10),l(t.errorMessage?10:-1),o(),m("formGroup",t.registerForm),o(8),m("ngClass",f(15,_,t.submitted&&t.f.name.errors)),o(),l(t.submitted&&t.f.name.errors?20:-1),o(8),m("ngClass",f(17,_,t.submitted&&t.f.email.errors)),o(),l(t.submitted&&t.f.email.errors?29:-1),o(8),m("type",t.showPassword?"text":"password")("ngClass",f(19,_,t.submitted&&t.f.password.errors)),o(3),b(" ",t.showPassword?"visibility_off":"visibility"," "),o(),l(t.submitted&&t.f.password.errors?41:-1),o(8),m("type",t.showPassword?"text":"password")("ngClass",f(21,_,t.submitted&&t.f.confirmPassword.errors)),o(),l(t.submitted&&t.f.confirmPassword.errors?50:-1),o(2),m("disabled",t.loading),o(),l(t.loading?53:54))},dependencies:[k,T,E,R,F,M,N,h,S],styles:[".card[_ngcontent-%COMP%]{border:none;border-radius:10px}.form-control[_ngcontent-%COMP%], .input-group-text[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem}.form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.btn-primary[_ngcontent-%COMP%]{padding:.75rem 1rem}"]})};export{V as RegisterComponent};
